<main class="row">
  <div class="col-12 calendar-page-body">
    <%= SimpleCalendar::ScheduleCalendar.new(self, {events: @schedules, attribute: :work_on}).render do |date, schedules| %>
      <%= date.strftime('%-m/%-d') %>
      <% schedules.each do |schedule| %>
        <% if schedule.present? %>
          <div class="shift-selector-wrapper">
            <select name="<%= date %>" class="shift-selector">
              <option value="0">隔勤</option>
              <option value="1">日勤</option>
              <option value="2">夜勤</option>
            </select>
          </div>
        <% end %>
      <% end %>
    <% end %>
  </div>

  <div class="col-12 shift-form">
    <%= form_with url: schedules_path, class: 'schedule-form' do |f| %>
      <% @schedules.each do |schedule| %>
        <%= f.hidden_field "schedules[][work_on]", value: schedule.work_on %>
        <%= f.hidden_field "schedules[][shift]", value: schedule.shift %>
      <% end %>
      <%= f.submit %>
    <% end %>
  </div>
</main>

<%= javascript_pack_tag 'schedules/new_pack' %>
